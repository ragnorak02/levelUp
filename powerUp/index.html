<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Power Up!</title>
<style>
  :root{
    --bg:#0b0f14; --card:#131a22; --ink:#e8eef6; --muted:#9fb0c7; --accent:#4CAF50; --accent-2:#2dd4bf;
    --ring:#2a3543; --warn:#f59e0b; --good:#22c55e; --bad:#ef4444;
    --cal-gap:4px; --cal-radius:10px; --cal-font:.9rem; --cal-count:.8rem;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
    background:linear-gradient(180deg,#0a0e13 0%, #0d131a 100%); color:var(--ink);
    display:flex; flex-direction:column;
  }

  header{
    display:flex; align-items:center; justify-content:space-between;
    padding:.6rem .9rem; border-bottom:1px solid var(--ring); background:#0e141b;
  }
  header h1{margin:0; font-size:1.05rem; letter-spacing:.2px}
  header .home{all:unset; cursor:pointer; padding:.35rem .6rem; border-radius:.6rem; border:1px solid var(--ring)}
  header .home:focus-visible{outline:2px solid var(--accent-2)}

  .wrap{width:min(1100px, 100%); margin-inline:auto; padding:10px 12px 18px; flex:1; display:flex; flex-direction:column; gap:10px}

  .grid{display:grid; gap:10px; grid-template-columns: repeat(12, 1fr)}
  .card{
    background:var(--card); border:1px solid var(--ring); border-radius:14px;
    padding:12px; box-shadow:0 8px 30px rgba(0,0,0,.25);
  }
  .card h3{margin:.1rem 0 .45rem; font-size:.95rem; color:var(--muted); font-weight:600}

  /* top cards */
  #powerCard{grid-column: span 3}
  #lastWorkoutCard{grid-column: span 9; display:grid; grid-template-columns: 1.15fr 1fr; gap:12px}
  .val{display:flex; align-items:baseline; gap:8px; font-size:1.6rem; font-weight:700}
  .trend{font-size:.8rem; color:var(--muted)}
  .spark{width:100%; height:45px; display:block}
  .meta{display:flex; gap:10px; flex-wrap:wrap}
  .badge{background:#0f1720; border:1px solid var(--ring); color:var(--muted); padding:.3rem .55rem; border-radius:999px; font-size:.82rem}
  .ex-list{display:grid; gap:6px}
  .ex{display:flex; justify-content:space-between; background:#0f141b; border:1px dashed #213043; border-radius:10px; padding:6px 8px; font-size:.95rem}
  .ex b{font-weight:700}
  .cta-row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .cta{
    all:unset; cursor:pointer; background:linear-gradient(90deg, var(--accent), #22c55e);
    color:#04130a; padding:.65rem .9rem; border-radius:10px; font-weight:700; box-shadow:0 6px 20px rgba(34,197,94,.25)
  }
  .cta:active{transform:translateY(1px)}
  .ghost{all:unset; cursor:pointer; color:var(--muted); padding:.5rem .7rem; border-radius:9px; border:1px solid var(--ring)}
  .small-btn{all:unset; cursor:pointer; color:var(--muted); padding:.4rem .6rem; border-radius:8px; border:1px solid var(--ring); font-size:.85rem}

  /* Power level styling */
  .power-level{
    font-size:1.8rem; 
    font-weight:800; 
    background:linear-gradient(45deg, #fbbf24, #f59e0b, #d97706);
    -webkit-background-clip:text;
    background-clip:text;
    -webkit-text-fill-color:transparent;
    text-shadow:0 2px 4px rgba(0,0,0,0.3);
  }
  .level-progress{
    width:100%; 
    height:8px; 
    background:#1a2332; 
    border-radius:4px; 
    overflow:hidden;
    margin:8px 0;
  }
  .level-bar{
    height:100%; 
    background:linear-gradient(90deg, #fbbf24, #f59e0b); 
    border-radius:4px;
    transition:width 0.3s ease;
  }

  /* Workout navigation */
  .workout-nav{
    display:flex; 
    align-items:center; 
    gap:8px; 
    margin-bottom:8px;
  }
  .nav-btn{
    all:unset; 
    cursor:pointer; 
    padding:.3rem .5rem; 
    border:1px solid var(--ring); 
    border-radius:8px; 
    font-size:.9rem;
    color:var(--muted);
  }
  .nav-btn:hover{background:rgba(255,255,255,0.05)}
  .nav-btn:disabled{opacity:0.4; cursor:not-allowed}

  /* calendar (compact + half width on desktop) */
  .calendar{grid-column: span 6}
  .calendar h3{margin:0; font-size:1rem; color:var(--muted)}
  .legend{display:flex; gap:10px; color:var(--muted); font-size:.85rem}
  .legend .swatch{width:10px; height:10px; border-radius:4px; display:inline-block; border:1px solid #233446}
  .cal-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:6px}
  .cal-nav{display:flex; align-items:center; gap:8px}
  .cal-nav button{all:unset; cursor:pointer; padding:.3rem .5rem; border:1px solid var(--ring); border-radius:8px; font-size:.9rem; color:var(--muted)}
  .cal-grid{display:grid; grid-template-columns:repeat(7,1fr); gap:var(--cal-gap); margin-top:6px}
  .dow{font-size:.78rem; color:var(--muted); text-align:center; padding:3px 0}
  .day{
    aspect-ratio:1/1; border:1px solid var(--ring); border-radius:var(--cal-radius);
    position:relative; background:#0f141b; cursor:pointer;
  }
  .day:hover{background:#1a1f26}
  .day.muted{opacity:.45; cursor:default}
  .day.muted:hover{background:#0f141b}
  .day.done{ background:#16a34a }
  .day.today{outline:2px solid var(--accent-2)}
  .num{ position:absolute; top:6px; left:7px; font-size:var(--cal-font); line-height:1; color:var(--ink) }
  .count{ position:absolute; bottom:6px; right:7px; font-size:var(--cal-count); color:var(--muted) }

  /* responsive (fit on one mobile screen) */
  @media (max-width: 980px){
    #powerCard{grid-column:span 12}
    #lastWorkoutCard{grid-column:span 12}
    .calendar{grid-column:span 12}
    #lastWorkoutCard{grid-template-columns:1fr}
  }
  @media (max-width: 480px){
    .wrap{gap:8px; padding:8px 8px 12px}
    .card{padding:10px; border-radius:12px}
    .val{font-size:1.4rem}
    .spark{height:40px}
    .badge{font-size:.78rem; padding:.25rem .5rem}
    .ex{padding:6px 7px; font-size:.92rem}
    .legend{font-size:.8rem}
    .calendar .card{padding:8px}
    .day{border-radius:8px}
    :root{ --cal-font:.85rem; --cal-count:.7rem }
  }

  /* Grouped exercise list (no reps) */
  .group-chip {
    display:flex; align-items:center; justify-content:space-between;
    padding:8px 10px; border:1px dashed #223143; border-radius:10px;
    background:#0f141b; margin-bottom:6px; gap:10px;
  }
  .group-chip h4 { margin:0; font-size:.95rem; color:#e8eef6 }
  .group-chip .names { color:#9fb0c7; font-size:.9rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
  .group-chip .count { font-size:.8rem; color:#9fb0c7; border:1px solid #213043; border-radius:999px; padding:2px 8px; background:#0c1117 }

  /* Grouped exercise list (no reps) */
.group-chip{
  display:flex;
  align-items:flex-start;      /* don't force equal heights */
  flex-wrap:wrap;              /* allow wrapping */
  gap:8px 10px;
  padding:8px 10px;
  border:1px dashed #223143;
  border-radius:10px;
  background:#0f141b;
  margin-bottom:6px;
}

.group-chip h4{
  margin:0;
  font-size:.95rem;
  color:#e8eef6;
  flex:0 0 auto;               /* keep the label compact */
}

.group-chip .names{
  flex:1 1 100%;               /* take full row below on wrap */
  color:#9fb0c7;
  font-size:.9rem;
  white-space:normal;          /* allow multi-line */
  overflow:visible;            /* no clipping */
  word-break:break-word;       /* break long words if needed */
}

.group-chip .count{
  margin-left:auto;            /* stay at the end of the first row */
  font-size:.8rem;
  color:#9fb0c7;
  border:1px solid #213043;
  border-radius:999px;
  padding:2px 8px;
  background:#0c1117;
}

#lastWorkoutCard { overflow-x: hidden; }

</style>
</head>
<body>
  <header>
    <button class="home" onclick="location.href='../main.html'">⟵ Home</button>
    <h1>Power Up!</h1>
    <div style="width:60px"></div>
  </header>

  <div class="wrap">
    <section class="grid">
      <article class="card" id="powerCard">
        <h3>Power Level</h3>
        <div class="val">
          <span class="power-level" id="powerLevel">Lv 1</span>
          <span class="trend" id="powerTrend">Novice</span>
        </div>
        <div class="level-progress">
          <div class="level-bar" id="levelBar" style="width: 0%"></div>
        </div>
        <div style="margin-top:8px; margin-bottom:6px;">
          <div style="font-size:.85rem; color:var(--muted); margin-bottom:2px;">Current Weight</div>
          <div style="font-size:1.1rem; font-weight:600;" id="currentWeight">—</div>
        </div>
        <button class="small-btn" id="logWeight">Log Weight</button>
      </article>

      <article class="card" id="lastWorkoutCard">
        <div>
          <div class="workout-nav">
            <button class="nav-btn" id="prevWorkout">←</button>
            <h3 id="workoutPanelTitle">Previous Workout</h3>
            <button class="nav-btn" id="nextWorkout">→</button>
          </div>
          <div class="meta">
            <span class="badge" id="lastDate">—</span>
            <span class="badge">Total Volume: <b id="lastVolume">—</b></span>
            <span class="badge">Exercises: <b id="lastMoves">—</b></span>
            <span class="badge">Sets: <b id="lastSets">—</b></span>
            <span class="badge" id="setsLeftBadge" style="display:none;">Sets Left: <b id="setsLeft">—</b></span>
          </div>
          <div class="ex-list" id="exList"></div>
        </div>
        <div class="cta-row">
          <button class="cta" id="startToday">Start Today's Workout</button>
          <button class="ghost" id="analytics">Analytics</button>
        </div>
      </article>

      <!-- Calendar -->
      <section class="card calendar" id="calendar">
        <div class="cal-header">
          <h3 id="calTitle">—</h3>
          <div class="cal-nav">
            <button id="calPrev">←</button>
            <button id="calNext">→</button>
          </div>
        </div>
        <div class="legend">
          <span><i class="swatch" style="background:#0f141b"></i> None</span>
          <span><i class="swatch" style="background:#16a34a"></i> Completed</span>
        </div>
        <div class="cal-grid" id="calDOW"></div>
        <div class="cal-grid" id="calGrid"></div>
      </section>
    </section>
  </div>

<script>
/* ========= Load data ========= */
const today = new Date();
const todayISO = today.toISOString().slice(0,10);
const fmt = (d)=>new Date(d+'T00:00:00');

// Calendar navigation state
let currentCalendarMonth = new Date(today.getFullYear(), today.getMonth(), 1);

// Workout navigation state
let currentWorkoutIndex = 0;
let workoutDates = [];

function readLocalDays(){
  const out = [];
  for(let i=0; i<localStorage.length; i++){
    const k = localStorage.key(i);
    if(!/^powerUp:\d{4}-\d{2}-\d{2}$/.test(k)) continue;
    try{
      const day = JSON.parse(localStorage.getItem(k));
      if(!day?.date) continue;
      // Keep bodyPart so we can group later
      const converted = {
        date: day.date,
        bodyWeight: day.bodyWeight ?? undefined,
        exercises: (day.exercises||[]).map(ex=>({
          name: ex.name || ex.exercise || 'Exercise',
          bodyPart: ex.bodyPart || ex.muscle || ex.group || 'Other',
          sets: (ex.sets||[]).map(s=>({
            reps: Number(s.reps)||0,
            weight: Number(s.weight)||0,
            completed: !!s.done
          }))
        }))
      };
      out.push(converted);
    }catch(e){}
  }
  return out.sort((a,b)=> fmt(a.date)-fmt(b.date));
}

/* Fallback demo data */
const demoWorkouts = [
  { date:'2025-08-12', bodyWeight:184.2, exercises:[
    {name:'OHP', bodyPart:'Shoulders', sets:[{reps:6,weight:95,completed:true},{reps:6,weight:95,completed:true},{reps:5,weight:100,completed:true}]},
  ]},
];

/* Merge: prefer local; else demo */
const workouts = (readLocalDays().length ? readLocalDays() : demoWorkouts);

const byDateAsc = (a,b)=> fmt(a.date) - fmt(b.date);
const shortDate = (d)=> new Date(d).toLocaleDateString(undefined, {month:'short', day:'numeric', weekday:'short'});
const totalVolume = (wo)=> wo.exercises.reduce((sum, ex)=> sum + ex.sets.reduce((s, st)=> s + (st.weight||0)*(st.reps||0), 0), 0);
const totalSets = (wo)=> wo.exercises.reduce((s,ex)=> s + ex.sets.length, 0);
const completedSets = (wo)=> wo.exercises.reduce((s,ex)=> s + ex.sets.filter(st=>st.completed).length, 0);

/* Power Level Calculation */
function calculatePowerLevel() {
  const totalVol = workouts.reduce((sum, w) => sum + totalVolume(w), 0);
  const maxWeight = Math.max(...workouts.flatMap(w => w.exercises.flatMap(e => e.sets.map(s => s.weight || 0))));
  const totalWorkouts = workouts.filter(w => w.exercises.length > 0).length;
  
  // Power score combines volume, max weight, and consistency
  const powerScore = (totalVol * 0.6) + (maxWeight * 100) + (totalWorkouts * 200);
  
  // Define power levels (JRPG style)
  const levels = [
    { threshold: 0, level: 1, title: "Novice", next: 5000 },
    { threshold: 5000, level: 2, title: "Apprentice", next: 12000 },
    { threshold: 12000, level: 3, title: "Warrior", next: 25000 },
    { threshold: 25000, level: 4, title: "Knight", next: 45000 },
    { threshold: 45000, level: 5, title: "Champion", next: 75000 },
    { threshold: 75000, level: 6, title: "Master", next: 120000 },
    { threshold: 120000, level: 7, title: "Grandmaster", next: 180000 },
    { threshold: 180000, level: 8, title: "Legend", next: 250000 },
    { threshold: 250000, level: 9, title: "Mythic", next: 350000 },
    { threshold: 350000, level: 10, title: "Godlike", next: 500000 }
  ];
  
  let currentLevel = levels[0];
  for (let i = 0; i < levels.length; i++) {
    if (powerScore >= levels[i].threshold) {
      currentLevel = levels[i];
    } else {
      break;
    }
  }
  
  const progress = currentLevel.next ? 
    Math.min(((powerScore - currentLevel.threshold) / (currentLevel.next - currentLevel.threshold)) * 100, 100) : 100;
  
  return {
    level: currentLevel.level,
    title: currentLevel.title,
    progress: progress,
    score: Math.round(powerScore)
  };
}

/* Sparkline */
function drawSpark(id, points){
  const c = document.getElementById(id);
  const w = c.clientWidth, h=c.clientHeight;
  c.width = Math.max(260,w); c.height = Math.max(52,h);
  const ctx = c.getContext('2d');
  ctx.clearRect(0,0,c.width,c.height);
  if(!points || points.length<2) return;

  const xs = points.map(p=>p.x.getTime());
  const ys = points.map(p=>p.y);
  const minX = Math.min(...xs), maxX = Math.max(...xs);
  const minY = Math.min(...ys), maxY = Math.max(...ys);
  const pad = 8;
  const xScale = (t)=> pad + ((t-minX)/(maxX-minX||1))*(c.width-2*pad);
  const yScale = (v)=> c.height - pad - ((v-minY)/(maxY-minY||1))*(c.height-2*pad);

  ctx.strokeStyle = '#233446'; ctx.lineWidth=1; ctx.setLineDash([2,3]);
  ctx.beginPath(); ctx.moveTo(pad, yScale(minY)); ctx.lineTo(c.width-pad, yScale(minY)); ctx.stroke();
  ctx.setLineDash([]);

  ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent-2') || '#2dd4bf';
  ctx.lineWidth = 2; ctx.beginPath();
  points.forEach((p,i)=>{ const x=xScale(p.x.getTime()), y=yScale(p.y); if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y); });
  ctx.stroke();

  const lp = points[points.length-1]; const lx=xScale(lp.x.getTime()), ly=yScale(lp.y);
  ctx.fillStyle = '#e8eef6'; ctx.beginPath(); ctx.arc(lx,ly,3,0,Math.PI*2); ctx.fill();
}

/* Power Level card */
function renderPowerLevel(){
  const power = calculatePowerLevel();
  document.getElementById('powerLevel').textContent = `Lv ${power.level}`;
  document.getElementById('powerTrend').textContent = power.title;
  document.getElementById('levelBar').style.width = `${power.progress}%`;
  
  // Render current weight
  const sorted = [...workouts].sort(byDateAsc);
  const lastWeight = sorted
    .filter(w=>typeof w.bodyWeight==='number' && !isNaN(w.bodyWeight))
    .at(-1);
  
  const weightEl = document.getElementById('currentWeight');
  if(lastWeight){
    weightEl.textContent = `${lastWeight.bodyWeight.toFixed(1)} lb`;
  } else {
    weightEl.textContent = '—';
  }
}

/* Workout navigation setup */
function setupWorkoutNavigation() {
  // Get all workout dates, including today if it exists
  const allDates = [...new Set([...workouts.map(w => w.date), todayISO])].sort().reverse();
  workoutDates = allDates;
  
  // Find current workout index (default to today or most recent)
  const todayIndex = workoutDates.indexOf(todayISO);
  currentWorkoutIndex = todayIndex >= 0 ? todayIndex : 0;
}

/* Today/Previous workout panel with navigation */
function renderWorkoutPanel(){
  setupWorkoutNavigation();
  
  const currentDate = workoutDates[currentWorkoutIndex];
  const workout = workouts.find(w => w.date === currentDate) || { date: currentDate, exercises: [], bodyWeight: undefined };
  
  const isToday = currentDate === todayISO;
  const inProgress = isToday && isTodayInProgress(workout);
  
  // Update navigation buttons
  document.getElementById('prevWorkout').disabled = currentWorkoutIndex >= workoutDates.length - 1;
  document.getElementById('nextWorkout').disabled = currentWorkoutIndex <= 0;
  
  const startBtn = document.getElementById('startToday');
  if (isToday) {
    startBtn.textContent = inProgress ? 'Continue Workout' : 'Start Today\'s Workout';
    startBtn.style.display = 'block';
  } else {
    startBtn.style.display = 'none';
  }

  const title = document.getElementById('workoutPanelTitle');
  title.textContent = isToday ? 'Today\'s Workout' : shortDate(workout.date);

  document.getElementById('lastDate').textContent = shortDate(workout.date);
  document.getElementById('lastVolume').textContent = totalVolume(workout).toLocaleString()+' lb';
  document.getElementById('lastMoves').textContent = workout.exercises.length;
  document.getElementById('lastSets').textContent = totalSets(workout);

  const setsLeftWrap = document.getElementById('setsLeftBadge');
  if(isToday && workout.exercises.length > 0){
    const left = totalSets(workout) - completedSets(workout);
    setsLeftWrap.style.display = 'inline-flex';
    document.getElementById('setsLeft').textContent = left;
  } else setsLeftWrap.style.display = 'none';

  // --- grouped list (no reps)
  const exList = document.getElementById('exList');
  exList.innerHTML = '';
  const groups = new Map(); // bodyPart -> Set(names)
  workout.exercises.forEach(ex=>{
    const bp = ex.bodyPart || 'Other';
    const name = ex.name || 'Exercise';
    if(!groups.has(bp)) groups.set(bp, new Set());
    groups.get(bp).add(name);
  });
  [...groups.entries()].forEach(([bp, nameSet])=>{
    const names = [...nameSet];
    const row = document.createElement('div');
    row.className = 'group-chip';
    row.innerHTML = `<h4>${bp}</h4><div class="names" title="${names.join(', ')}">${names.join(', ')}</div><span class="count">${names.length}</span>`;
    exList.appendChild(row);
  });
}

/* Calendar */
function renderCalendar(){
  const calTitle = document.getElementById('calTitle');
  const calGrid  = document.getElementById('calGrid');
  const calDOW   = document.getElementById('calDOW');
  calDOW.innerHTML = '';
  ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(d=>{
    const e = document.createElement('div');
    e.className='dow'; e.textContent = d; calDOW.appendChild(e);
  });

  const year = currentCalendarMonth.getFullYear();
  const month = currentCalendarMonth.getMonth();
  const monthStart = new Date(year, month, 1);
  const monthEnd   = new Date(year, month+1, 0);
  calTitle.textContent = monthStart.toLocaleDateString(undefined, {month:'long', year:'numeric'});

  const byDay = new Map();
  workouts.forEach(w=>{
    const d = fmt(w.date);
    if(d.getFullYear()===year && d.getMonth()===month){
      const k = d.getDate();
      byDay.set(k, (byDay.get(k)||0) + totalVolume(w));
    }
  });

  calGrid.innerHTML = '';
  const leadingBlanks = monthStart.getDay();
  
  // Add previous month trailing dates
  for(let i = leadingBlanks - 1; i >= 0; i--){
    const prevDate = new Date(year, month, -i);
    const cell = document.createElement('div');
    cell.className = 'day muted';
    const num = document.createElement('div'); 
    num.className = 'num'; 
    num.textContent = prevDate.getDate();
    cell.appendChild(num);
    calGrid.appendChild(cell);
  }
  
  // Current month dates
  for(let day=1; day<=monthEnd.getDate(); day++){
    const cell = document.createElement('div');
    const vol = byDay.get(day)||0;
    let state = '';
    if(vol > 0) state = 'done';
    
    const cellDate = new Date(year, month, day);
    const cellDateStr = cellDate.toISOString().slice(0,10);
    
    if(day===today.getDate() && month===today.getMonth() && year===today.getFullYear()) state += ' today';
    cell.className = `day ${state}`.trim();
    
    // Make clickable if has workout data or is today/future
    if(vol > 0 || cellDateStr >= todayISO) {
      cell.addEventListener('click', () => {
        window.location.href = `workout.html?date=${cellDateStr}`;
      });
    }

    const num = document.createElement('div'); num.className='num'; num.textContent = day;
    cell.appendChild(num);
    if(vol){
      const ct  = document.createElement('div'); ct.className='count'; ct.textContent = Math.round(vol)+' lb';
      cell.appendChild(ct);
    }
    calGrid.appendChild(cell);
  }
}

/* In-progress detection */
function isTodayInProgress(todayW){
  if(!todayW || !todayW.exercises){
    return localStorage.getItem('workoutInProgress') === todayISO;
  }
  const hasSets = totalSets(todayW) > 0;
  const allDone = completedSets(todayW) === totalSets(todayW);
  return hasSets && !allDone;
}

/* Event Listeners */
document.getElementById('startToday').addEventListener('click', ()=>{
  localStorage.setItem('workoutInProgress', todayISO);
  window.location.href = 'workout.html?start=today';
});

document.getElementById('analytics').addEventListener('click', ()=>{
  window.location.href = 'analytics.html';
});

document.getElementById('logWeight').addEventListener('click', ()=>{
  const w = prompt('Enter today\'s weight (lb):');
  if(!w) return;
  const k = `powerUp:${todayISO}`;
  const existing = localStorage.getItem(k);
  if(existing){
    const d = JSON.parse(existing); d.bodyWeight = parseFloat(w); localStorage.setItem(k, JSON.stringify(d));
  }else{
    localStorage.setItem(k, JSON.stringify({date: todayISO, bodyWeight:parseFloat(w), exercises:[]}));
  }
  location.reload();
});

// Workout navigation
document.getElementById('prevWorkout').addEventListener('click', () => {
  if (currentWorkoutIndex < workoutDates.length - 1) {
    currentWorkoutIndex++;
    renderWorkoutPanel();
  }
});

document.getElementById('nextWorkout').addEventListener('click', () => {
  if (currentWorkoutIndex > 0) {
    currentWorkoutIndex--;
    renderWorkoutPanel();
  }
});

// Calendar navigation
document.getElementById('calPrev').addEventListener('click', () => {
  currentCalendarMonth = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth() - 1, 1);
  renderCalendar();
});

document.getElementById('calNext').addEventListener('click', () => {
  currentCalendarMonth = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth() + 1, 1);
  renderCalendar();
});

/* Init */
function renderAll(){
  renderPowerLevel();
  renderWorkoutPanel();
  renderCalendar();
}
renderAll();

</script>
</body>
</html>